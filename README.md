# DeFind
DeFind plugin for Protege.

# Замечания по написанию плагинов для Protege

Замечания я записал в произвольном порядке, то что успел вспомнить после того как сделал этот плагин

* версия Java и версия Protege имееют значение, я использовал java 1.8 и protege 1.5, есть ещё одна работающая комбинация, вроде бы java 1.7 и protege 1.4
* плагин собирается maven-ом, я использвовал версию 3.5.4, нужно использовать команду **mvn clean install** для сборки
* у maven (или у его плагинов) имеется следующая бага: если сделать **mvn install** два раза, то после второй сборки у .jar файла плагина будет битый манифест и его protege загрузить не сможет
* после сборки плагин появляется в папке **./target/** в виде файла **defind-0.2.0-SNAPSHOT.jar**, который нужно поместить в подпапку *proteje/plugins*, чтобы в дальнейшем использовать
* чтобы этот плагин нормально работал, должны быть установлены сторонние зависимости, у меня это: cellfie-2.1.0.jar, code-generation-2.0.0.jar, elk-protege-0.5.0-SNAPSHOT.jar, existentialquery-2.0.0.jar, explanation-workbench-3.0.0.jar, ontograf-2.0.3.jar, org.coode.dlquery-4.0.1.jar, org.semanticweb.hermit-1.3.8.413.jar, owldoc-3.0.3.jar, owlviz-5.0.3.jar, protege-proof-explanation-0.1.0.jar, puli-0.1.0.jar, rdf-library-2.0.2.jar, sparql-query-plugin-2.0.1.jar, swrltab-plugin-1.0.3.jar,
* некоторые из этих jar файлов могут быть лишними, а некоторые точно необходимы, например решатель ELK. Версии файлов тоже по возможности должны быть именно такими, потому что если версия неправильная, то при загрузке система рушится, в консоли появляется малопонятное сообщение об ошибке
* основные проблемы при разработке плагинов идут от системы apache felix, которая вызывается в виде плагина к maven. Идея системы в следующем: система эклипс может работать с несколькими разными плагинами от разных разработчиков. Теоретически эти разработчики могут использовать разные версии одного и того же класса, поэтому все классы, которые загружаются плагином, включая зависимости плагина, загружаются с помощью специального class-лоадера, который изолирует разные версии классов. Поэтому java-объекты из других плагинов становятся недоступны, даже если у вас есть ссылка на такой объект в java коде.
* теоретически процессом закукливания плагина можно как-то управлять в настройках apache felix в **pom.xml**, однако за ограниченное время мне не удалось разобраться в том как это делать
* для написания плагина я использовал шаблон [отсюда](https://github.com/protegeproject/protege-plugin-examples)
    
     
